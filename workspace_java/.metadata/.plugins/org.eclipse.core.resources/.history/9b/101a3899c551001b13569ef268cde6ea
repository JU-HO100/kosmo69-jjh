<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>카카오 로그인 Test</title>
<script src = "//developers.kakao.com/sdk/js/kakao.min.js"></script>
<!-- 카카오 로그인 -->
<script type="text/javascript" src="/WebContent/kakaoAPI/kakao.js"></script>
<!-- 네이버 로그인 -->
<script type="text/javascript" src="https://static.nid.naver.com/js/naveridlogin_js_sdk_2.0.0.js" charset="utf-8"></script>

</head>
<body>
	<a href="#" id="login"> Login </a>
	<hr> <!-- Google Login Btn --> 
	<div class="g-signin2" style="max-width:400px;max-height:60px" 
		data-onsuccess="onSignIn" data-theme="dark" data-width="auto" data-height="60">
	</div> <!-- Naver Login Btn --> 
	<div id="naverIdLogin" > 
		<a id="naverIdLogin_loginButton"> 
		<img src="https://static.nid.naver.com/oauth/big_g.PNG?version=js-2.0.0" width="100%" height="auto" style="max-width:400px;max-height:60px"/> 
		</a> 
	</div> <!-- KaKao Login Btn --> 
	<a id="login-form-btn" href="javascript:loginFormWithKakao()"> 
		<img src="//k.kakaocdn.net/14/dn/btqCn0WEmI3/nijroPfbpCa4at5EIsjyf0/o.jpg" width="100%" height="auto" style="max-width:400px;max-height:60px"/> 
	</a>
<script type="text/javascript"> 
	var naverLogin = new naver.LoginWithNaverId({ 
		clientId: "clientId"
		, callbackUrl: "callbackUrl"
		, isPopup: false
		, /* callback 페이지가 분리되었을 경우에 callback 페이지에서는 callback처리를 해줄수 있도록 설정합니다. */ 
	}); /* (3) 네아로 로그인 정보를 초기화하기 위하여 init을 호출 */ 
	naverLogin.init(); 
	/* (4) Callback의 처리. 정상적으로 Callback 처리가 완료될 경우 main page로 redirect(또는 Popup close) */ 
	window.addEventListener('load', function () { 
		naverLogin.getLoginStatus(function (status) { if (status) { 
			/* (5) 필수적으로 받아야하는 프로필 정보가 있다면 callback처리 시점에 체크 */ 
			console.log(naverLogin.accessToken.accessToken) 
			var email = naverLogin.user.getEmail(); 
			var profileImage = naverLogin.user.getProfileImage(); 
			var name = naverLogin.user.getName(); 
			var uniqId = naverLogin.user.getId(); 
			if( email == undefined || email == null) { 
				alert("이메일은 필수정보입니다. 정보제공을 동의해주세요."); 
				/* (5-1) 사용자 정보 재동의를 위하여 다시 네아로 동의페이지로 이동함 */ 
				naverLogin.reprompt(); return; 
				}else if( name == undefined || name == null){ 
					alert("회원이름은 필수정보입니다. 정보제공을 동의해주세요."); 
					naverLogin.reprompt(); return; 
					}else{ 
						// 성공 
						} 
			} else { 
				console.log("callback 처리에 실패하였습니다."); 
				} 
		}); 
		}); 
	Kakao.init('Kakao API Key'); 
	
	function loginFormWithKakao() { 
		Kakao.Auth.loginForm({ 
			success: function(authObj) { 
				Kakao.API.request({ 
					url: '/v2/user/me'
					, success: function(res) { 
						console.log(res.kakao_account['email']) 
						console.log(res.id) 
						} 
				}) 
			}
		, fail: function(err) { 
			alert(JSON.stringify(err)) 
			}, 
		}) 
	} 
	$(document).ready(function(){ 
		
	}) 
	$(function(){ 
		$('#login').on("click",function(){ 
			js_login(); 
		}) 
		$('#naverIdLogin_loginButton').on("click",function(){ 
			var email = $('#naver_email').val(); 
			var password = $('#naver_password').val(); 
			$('.email').val(email); 
			$('.password').val(password); }); 
		}); function googleSign(){ 
			
		} 
		function onSignIn(googleUser) { 
			var profile = googleUser.getBasicProfile(); 
			// console.log("ID: " + profile.getId()); 
			// console.log('Full Name: ' + profile.getName()); 
			// console.log('Given Name: ' + profile.getGivenName());
			// console.log('Family Name: ' + profile.getFamilyName());
			// console.log("Image URL: " + profile.getImageUrl()); 
			// console.log("Email: " + profile.getEmail()); }
</script>
</body>
</html>