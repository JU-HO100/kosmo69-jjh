<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>카카오 로그인</title>
<script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
</head>
<body>
<!-- =============================== 카카오 로그인 ================================================== -->
<a id="kakao-login-btn"></a>
<a href="http://developers.kakao.com/logout"></a>

<script type='text/javascript'>
//버튼 이미지 전환 
Kakao.init('f61c36ee28b1fe4d00e270bcf75d344d'); //아까 카카오개발자홈페이지에서 발급받은 자바스크립트 키를 입력함
 
//카카오 로그인 버튼을 생성합니다. 
Kakao.Auth.createLoginButton({
    container: '#kakao-login-btn', 
    success: function(authObj) {
           Kakao.API.request({
               url: '/v2/user/me',
               
               success: function(res) {
            	   
//                      console.log(res.id);//<---- 콘솔 로그에 id 정보 출력(id는 res안에 있기 때문에  res.id 로 불러온다)
//                      console.log(res.kaccount_email);//<---- 콘솔 로그에 email 정보 출력 (어딨는지 알겠죠?)
//                      console.log(res.properties['nickname']);//<---- 콘솔 로그에 닉네임 출력(properties에 있는 nickname 접근 
                 // res.properties.nickname으로도 접근 가능 )
                     console.log(authObj.access_token);//<---- 콘솔 로그에 토큰값 출력
          
		          var kakao = res.properties.nickname;    //카카오톡 닉네임을 변수에 저장 (닉네임 값을 다른페이지로 넘겨 출력하기 위해서)
		      		session.setAttribute("kakao",kakao);
// 		          window.location.replace("http://192.168.0.38:9000/member/index.jsp");
		          //로그인 결과 페이지로 닉네임 값을 넘겨서 출력시킨다.,
                   }
                 });
		           Kakao.Auth.authorize({
						redirectUri: 'http://192.168.0.38:9000/member/index.jsp'
					});
               },
               fail: function(error) {
                 alert(JSON.stringify(error));
               }
             });
</script>
<!-- =============================== 카카오 로그인 ================================================== -->


</body>
</html>